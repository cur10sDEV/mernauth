import{r as y,R as E,u as ue,j as de}from"./index-4bf03aac.js";function re(e){var t,s,o="";if(typeof e=="string"||typeof e=="number")o+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(s=re(e[t]))&&(o&&(o+=" "),o+=s);else for(t in e)e[t]&&(o&&(o+=" "),o+=t);return o}function $(){for(var e,t,s=0,o="";s<arguments.length;)(e=arguments[s++])&&(t=re(e))&&(o&&(o+=" "),o+=t);return o}const q=e=>typeof e=="number"&&!isNaN(e),F=e=>typeof e=="string",L=e=>typeof e=="function",W=e=>F(e)||L(e)?e:null,Z=e=>y.isValidElement(e)||F(e)||L(e)||q(e);function pe(e,t,s){s===void 0&&(s=300);const{scrollHeight:o,style:p}=e;requestAnimationFrame(()=>{p.minHeight="initial",p.height=o+"px",p.transition=`all ${s}ms`,requestAnimationFrame(()=>{p.height="0",p.padding="0",p.margin="0",setTimeout(t,s)})})}function Y(e){let{enter:t,exit:s,appendPosition:o=!1,collapse:p=!0,collapseDuration:u=300}=e;return function(n){let{children:a,position:C,preventExitTransition:f,done:r,nodeRef:l,isIn:b}=n;const c=o?`${t}--${C}`:t,m=o?`${s}--${C}`:s,h=y.useRef(0);return y.useLayoutEffect(()=>{const i=l.current,d=c.split(" "),I=O=>{O.target===l.current&&(i.dispatchEvent(new Event("d")),i.removeEventListener("animationend",I),i.removeEventListener("animationcancel",I),h.current===0&&O.type!=="animationcancel"&&i.classList.remove(...d))};i.classList.add(...d),i.addEventListener("animationend",I),i.addEventListener("animationcancel",I)},[]),y.useEffect(()=>{const i=l.current,d=()=>{i.removeEventListener("animationend",d),p?pe(i,r,u):r()};b||(f?d():(h.current=1,i.className+=` ${m}`,i.addEventListener("animationend",d)))},[b]),E.createElement(E.Fragment,null,a)}}function ne(e,t){return e!=null?{content:e.content,containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,status:t}:{}}const x={list:new Map,emitQueue:new Map,on(e,t){return this.list.has(e)||this.list.set(e,[]),this.list.get(e).push(t),this},off(e,t){if(t){const s=this.list.get(e).filter(o=>o!==t);return this.list.set(e,s),this}return this.list.delete(e),this},cancelEmit(e){const t=this.emitQueue.get(e);return t&&(t.forEach(clearTimeout),this.emitQueue.delete(e)),this},emit(e){this.list.has(e)&&this.list.get(e).forEach(t=>{const s=setTimeout(()=>{t(...[].slice.call(arguments,1))},0);this.emitQueue.has(e)||this.emitQueue.set(e,[]),this.emitQueue.get(e).push(s)})}},J=e=>{let{theme:t,type:s,...o}=e;return E.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:t==="colored"?"currentColor":`var(--toastify-icon-color-${s})`,...o})},ee={info:function(e){return E.createElement(J,{...e},E.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return E.createElement(J,{...e},E.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return E.createElement(J,{...e},E.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return E.createElement(J,{...e},E.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return E.createElement("div",{className:"Toastify__spinner"})}};function fe(e){const[,t]=y.useReducer(c=>c+1,0),[s,o]=y.useState([]),p=y.useRef(null),u=y.useRef(new Map).current,n=c=>s.indexOf(c)!==-1,a=y.useRef({toastKey:1,displayedToast:0,count:0,queue:[],props:e,containerId:null,isToastActive:n,getToast:c=>u.get(c)}).current;function C(c){let{containerId:m}=c;const{limit:h}=a.props;!h||m&&a.containerId!==m||(a.count-=a.queue.length,a.queue=[])}function f(c){o(m=>c==null?[]:m.filter(h=>h!==c))}function r(){const{toastContent:c,toastProps:m,staleId:h}=a.queue.shift();b(c,m,h)}function l(c,m){let{delay:h,staleId:i,...d}=m;if(!Z(c)||function(w){return!p.current||a.props.enableMultiContainer&&w.containerId!==a.props.containerId||u.has(w.toastId)&&w.updateId==null}(d))return;const{toastId:I,updateId:O,data:v}=d,{props:T}=a,M=()=>f(I),k=O==null;k&&a.count++;const _={...T,style:T.toastStyle,key:a.toastKey++,...Object.fromEntries(Object.entries(d).filter(w=>{let[S,N]=w;return N!=null})),toastId:I,updateId:O,data:v,closeToast:M,isIn:!1,className:W(d.className||T.toastClassName),bodyClassName:W(d.bodyClassName||T.bodyClassName),progressClassName:W(d.progressClassName||T.progressClassName),autoClose:!d.isLoading&&(B=d.autoClose,U=T.autoClose,B===!1||q(B)&&B>0?B:U),deleteToast(){const w=ne(u.get(I),"removed");u.delete(I),x.emit(4,w);const S=a.queue.length;if(a.count=I==null?a.count-a.displayedToast:a.count-1,a.count<0&&(a.count=0),S>0){const N=I==null?a.props.limit:1;if(S===1||N===1)a.displayedToast++,r();else{const D=N>S?S:N;a.displayedToast=D;for(let R=0;R<D;R++)r()}}else t()}};var B,U;_.iconOut=function(w){let{theme:S,type:N,isLoading:D,icon:R}=w,P=null;const z={theme:S,type:N};return R===!1||(L(R)?P=R(z):y.isValidElement(R)?P=y.cloneElement(R,z):F(R)||q(R)?P=R:D?P=ee.spinner():(V=>V in ee)(N)&&(P=ee[N](z))),P}(_),L(d.onOpen)&&(_.onOpen=d.onOpen),L(d.onClose)&&(_.onClose=d.onClose),_.closeButton=T.closeButton,d.closeButton===!1||Z(d.closeButton)?_.closeButton=d.closeButton:d.closeButton===!0&&(_.closeButton=!Z(T.closeButton)||T.closeButton);let A=c;y.isValidElement(c)&&!F(c.type)?A=y.cloneElement(c,{closeToast:M,toastProps:_,data:v}):L(c)&&(A=c({closeToast:M,toastProps:_,data:v})),T.limit&&T.limit>0&&a.count>T.limit&&k?a.queue.push({toastContent:A,toastProps:_,staleId:i}):q(h)?setTimeout(()=>{b(A,_,i)},h):b(A,_,i)}function b(c,m,h){const{toastId:i}=m;h&&u.delete(h);const d={content:c,props:m};u.set(i,d),o(I=>[...I,i].filter(O=>O!==h)),x.emit(4,ne(d,d.props.updateId==null?"added":"updated"))}return y.useEffect(()=>(a.containerId=e.containerId,x.cancelEmit(3).on(0,l).on(1,c=>p.current&&f(c)).on(5,C).emit(2,a),()=>{u.clear(),x.emit(3,a)}),[]),y.useEffect(()=>{a.props=e,a.isToastActive=n,a.displayedToast=s.length}),{getToastToRender:function(c){const m=new Map,h=Array.from(u.values());return e.newestOnTop&&h.reverse(),h.forEach(i=>{const{position:d}=i.props;m.has(d)||m.set(d,[]),m.get(d).push(i)}),Array.from(m,i=>c(i[0],i[1]))},containerRef:p,isToastActive:n}}function se(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientX:e.clientX}function oe(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientY:e.clientY}function me(e){const[t,s]=y.useState(!1),[o,p]=y.useState(!1),u=y.useRef(null),n=y.useRef({start:0,x:0,y:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,boundingRect:null,didMove:!1}).current,a=y.useRef(e),{autoClose:C,pauseOnHover:f,closeToast:r,onClick:l,closeOnClick:b}=e;function c(v){if(e.draggable){v.nativeEvent.type==="touchstart"&&v.nativeEvent.preventDefault(),n.didMove=!1,document.addEventListener("mousemove",d),document.addEventListener("mouseup",I),document.addEventListener("touchmove",d),document.addEventListener("touchend",I);const T=u.current;n.canCloseOnClick=!0,n.canDrag=!0,n.boundingRect=T.getBoundingClientRect(),T.style.transition="",n.x=se(v.nativeEvent),n.y=oe(v.nativeEvent),e.draggableDirection==="x"?(n.start=n.x,n.removalDistance=T.offsetWidth*(e.draggablePercent/100)):(n.start=n.y,n.removalDistance=T.offsetHeight*(e.draggablePercent===80?1.5*e.draggablePercent:e.draggablePercent/100))}}function m(v){if(n.boundingRect){const{top:T,bottom:M,left:k,right:_}=n.boundingRect;v.nativeEvent.type!=="touchend"&&e.pauseOnHover&&n.x>=k&&n.x<=_&&n.y>=T&&n.y<=M?i():h()}}function h(){s(!0)}function i(){s(!1)}function d(v){const T=u.current;n.canDrag&&T&&(n.didMove=!0,t&&i(),n.x=se(v),n.y=oe(v),n.delta=e.draggableDirection==="x"?n.x-n.start:n.y-n.start,n.start!==n.x&&(n.canCloseOnClick=!1),T.style.transform=`translate${e.draggableDirection}(${n.delta}px)`,T.style.opacity=""+(1-Math.abs(n.delta/n.removalDistance)))}function I(){document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",I),document.removeEventListener("touchmove",d),document.removeEventListener("touchend",I);const v=u.current;if(n.canDrag&&n.didMove&&v){if(n.canDrag=!1,Math.abs(n.delta)>n.removalDistance)return p(!0),void e.closeToast();v.style.transition="transform 0.2s, opacity 0.2s",v.style.transform=`translate${e.draggableDirection}(0)`,v.style.opacity="1"}}y.useEffect(()=>{a.current=e}),y.useEffect(()=>(u.current&&u.current.addEventListener("d",h,{once:!0}),L(e.onOpen)&&e.onOpen(y.isValidElement(e.children)&&e.children.props),()=>{const v=a.current;L(v.onClose)&&v.onClose(y.isValidElement(v.children)&&v.children.props)}),[]),y.useEffect(()=>(e.pauseOnFocusLoss&&(document.hasFocus()||i(),window.addEventListener("focus",h),window.addEventListener("blur",i)),()=>{e.pauseOnFocusLoss&&(window.removeEventListener("focus",h),window.removeEventListener("blur",i))}),[e.pauseOnFocusLoss]);const O={onMouseDown:c,onTouchStart:c,onMouseUp:m,onTouchEnd:m};return C&&f&&(O.onMouseEnter=i,O.onMouseLeave=h),b&&(O.onClick=v=>{l&&l(v),n.canCloseOnClick&&r()}),{playToast:h,pauseToast:i,isRunning:t,preventExitTransition:o,toastRef:u,eventHandlers:O}}function ie(e){let{closeToast:t,theme:s,ariaLabel:o="close"}=e;return E.createElement("button",{className:`Toastify__close-button Toastify__close-button--${s}`,type:"button",onClick:p=>{p.stopPropagation(),t(p)},"aria-label":o},E.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},E.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function ge(e){let{delay:t,isRunning:s,closeToast:o,type:p="default",hide:u,className:n,style:a,controlledProgress:C,progress:f,rtl:r,isIn:l,theme:b}=e;const c=u||C&&f===0,m={...a,animationDuration:`${t}ms`,animationPlayState:s?"running":"paused",opacity:c?0:1};C&&(m.transform=`scaleX(${f})`);const h=$("Toastify__progress-bar",C?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${b}`,`Toastify__progress-bar--${p}`,{"Toastify__progress-bar--rtl":r}),i=L(n)?n({rtl:r,type:p,defaultClassName:h}):$(h,n);return E.createElement("div",{role:"progressbar","aria-hidden":c?"true":"false","aria-label":"notification timer",className:i,style:m,[C&&f>=1?"onTransitionEnd":"onAnimationEnd"]:C&&f<1?null:()=>{l&&o()}})}const ye=e=>{const{isRunning:t,preventExitTransition:s,toastRef:o,eventHandlers:p}=me(e),{closeButton:u,children:n,autoClose:a,onClick:C,type:f,hideProgressBar:r,closeToast:l,transition:b,position:c,className:m,style:h,bodyClassName:i,bodyStyle:d,progressClassName:I,progressStyle:O,updateId:v,role:T,progress:M,rtl:k,toastId:_,deleteToast:B,isIn:U,isLoading:A,iconOut:w,closeOnClick:S,theme:N}=e,D=$("Toastify__toast",`Toastify__toast-theme--${N}`,`Toastify__toast--${f}`,{"Toastify__toast--rtl":k},{"Toastify__toast--close-on-click":S}),R=L(m)?m({rtl:k,position:c,type:f,defaultClassName:D}):$(D,m),P=!!M||!a,z={closeToast:l,type:f,theme:N};let V=null;return u===!1||(V=L(u)?u(z):y.isValidElement(u)?y.cloneElement(u,z):ie(z)),E.createElement(b,{isIn:U,done:B,position:c,preventExitTransition:s,nodeRef:o},E.createElement("div",{id:_,onClick:C,className:R,...p,style:h,ref:o},E.createElement("div",{...U&&{role:T},className:L(i)?i({type:f}):$("Toastify__toast-body",i),style:d},w!=null&&E.createElement("div",{className:$("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!A})},w),E.createElement("div",null,n)),V,E.createElement(ge,{...v&&!P?{key:`pb-${v}`}:{},rtl:k,theme:N,delay:a,isRunning:t,isIn:U,closeToast:l,hide:r,type:f,style:O,className:I,controlledProgress:P,progress:M||0})))},K=function(e,t){return t===void 0&&(t=!1),{enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:t}},he=Y(K("bounce",!0));Y(K("slide",!0));Y(K("zoom"));Y(K("flip"));const ae=y.forwardRef((e,t)=>{const{getToastToRender:s,containerRef:o,isToastActive:p}=fe(e),{className:u,style:n,rtl:a,containerId:C}=e;function f(r){const l=$("Toastify__toast-container",`Toastify__toast-container--${r}`,{"Toastify__toast-container--rtl":a});return L(u)?u({position:r,rtl:a,defaultClassName:l}):$(l,W(u))}return y.useEffect(()=>{t&&(t.current=o.current)},[]),E.createElement("div",{ref:o,className:"Toastify",id:C},s((r,l)=>{const b=l.length?{...n}:{...n,pointerEvents:"none"};return E.createElement("div",{className:f(r),style:b,key:`container-${r}`},l.map((c,m)=>{let{content:h,props:i}=c;return E.createElement(ye,{...i,isIn:p(i.toastId),style:{...i.style,"--nth":m+1,"--len":l.length},key:`toast-${i.key}`},h)}))}))});ae.displayName="ToastContainer",ae.defaultProps={position:"top-right",transition:he,autoClose:5e3,closeButton:ie,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,draggable:!0,draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};let te,j=new Map,H=[],ve=1;function le(){return""+ve++}function Te(e){return e&&(F(e.toastId)||q(e.toastId))?e.toastId:le()}function Q(e,t){return j.size>0?x.emit(0,e,t):H.push({content:e,options:t}),t.toastId}function X(e,t){return{...t,type:t&&t.type||e,toastId:Te(t)}}function G(e){return(t,s)=>Q(t,X(e,s))}function g(e,t){return Q(e,X("default",t))}g.loading=(e,t)=>Q(e,X("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t})),g.promise=function(e,t,s){let o,{pending:p,error:u,success:n}=t;p&&(o=F(p)?g.loading(p,s):g.loading(p.render,{...s,...p}));const a={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},C=(r,l,b)=>{if(l==null)return void g.dismiss(o);const c={type:r,...a,...s,data:b},m=F(l)?{render:l}:l;return o?g.update(o,{...c,...m}):g(m.render,{...c,...m}),b},f=L(e)?e():e;return f.then(r=>C("success",n,r)).catch(r=>C("error",u,r)),f},g.success=G("success"),g.info=G("info"),g.error=G("error"),g.warning=G("warning"),g.warn=g.warning,g.dark=(e,t)=>Q(e,X("default",{theme:"dark",...t})),g.dismiss=e=>{j.size>0?x.emit(1,e):H=H.filter(t=>e!=null&&t.options.toastId!==e)},g.clearWaitingQueue=function(e){return e===void 0&&(e={}),x.emit(5,e)},g.isActive=e=>{let t=!1;return j.forEach(s=>{s.isToastActive&&s.isToastActive(e)&&(t=!0)}),t},g.update=function(e,t){t===void 0&&(t={}),setTimeout(()=>{const s=function(o,p){let{containerId:u}=p;const n=j.get(u||te);return n&&n.getToast(o)}(e,t);if(s){const{props:o,content:p}=s,u={delay:100,...o,...t,toastId:t.toastId||e,updateId:le()};u.toastId!==e&&(u.staleId=e);const n=u.render||p;delete u.render,Q(n,u)}},0)},g.done=e=>{g.update(e,{progress:1})},g.onChange=e=>(x.on(4,e),()=>{x.off(4,e)}),g.POSITION={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},g.TYPE={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"},x.on(2,e=>{te=e.containerId||e,j.set(te,e),H.forEach(t=>{x.emit(0,t.content,t.options)}),H=[]}).on(3,e=>{j.delete(e.containerId||e),j.size===0&&x.off(0).off(1).off(5)});const Ee={userInfo:localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")):null,isLoading:!1},Ce=(e,t)=>{switch(t.type){case"register":return{...e,userInfo:t.payload};case"login":return{...e,userInfo:t.payload};case"logout":return{...e,userInfo:t.payload};case"get":return{...e,userInfo:t.payload};case"update":return{...e,userInfo:t.payload};case"apiCallStart":return{...e,isLoading:!0};case"apiCallEnd":return{...e,isLoading:!1};default:throw new Error("Unknown action type")}},ce=y.createContext(null),be=({children:e})=>{const[t,s]=y.useReducer(Ce,Ee),o=ue();y.useEffect(()=>{localStorage.setItem("userInfo",JSON.stringify(t.userInfo))},[t]);const p=async f=>{try{s({type:"apiCallStart"});const l=await(await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)})).json();s({type:"apiCallEnd"}),l.status==="success"?(s({type:"register",payload:l.data}),g.success(l.message),o("/profile")):l.status==="failed"&&g.error(l.message)}catch(r){console.error(r)}},u=async f=>{try{s({type:"apiCallStart"});const l=await(await fetch("/api/users/auth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)})).json();s({type:"apiCallEnd"}),l.status==="success"?(s({type:"login",payload:l.data}),g.success(l.message),o("/profile")):l.status==="failed"&&g.error(l.message)}catch(r){console.error(r)}},n=async()=>{try{s({type:"apiCallStart"});const r=await(await fetch("/api/users/profile")).json();s({type:"apiCallEnd"}),r.status==="success"?(s({type:"get",payload:r.data}),g.success(r.message)):r.status==="failed"&&g.error(r.message)}catch(f){console.error(f)}},a=async f=>{try{s({type:"apiCallStart"});const l=await(await fetch("/api/users/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)})).json();s({type:"apiCallEnd"}),l.status==="success"?(s({type:"update",payload:l.data}),g.success(l.message)):l.status==="failed"&&g.error(l.message)}catch(r){console.error(r)}},C=async()=>{try{s({type:"apiCallStart"});const r=await(await fetch("/api/users/logout",{method:"POST",headers:{"Content-Type":"application/json"}})).json();s({type:"apiCallEnd"}),r.status==="success"?(s({type:"logout",payload:r.data}),g.success(r.message),o("/")):r.status==="failed"&&g.error(r.message)}catch(f){console.error(f)}};return de.jsx(ce.Provider,{value:{state:t,registerUser:p,loginUser:u,getUser:n,updateUser:a,logoutUser:C},children:e})},_e=()=>y.useContext(ce);export{be as U,ae as k,_e as u};
